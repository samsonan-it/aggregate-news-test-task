# Агрегатор новостей

## Description

Тестовое задание на тему Java + JPA/Hibernate

## How To Start

1. В application.properties прописать путь к любой ПУСТОЙ базе PostgreSQL, при необходимости там же указать пользователя и пароль БД, если они не дефолтовые (postgres/postgres)
2. Запустить приложение. Вся инициализация должна произойти автоматом
Самый простой способ запустить приложение не через IDE:
2.1. "mvn package", чтобы собрать jar 
2.2. java -jar jar-файл-собрынный-на-предыдущем-шаге.jar

3. На дефолтовом порту приложение должно быть доступно по ссылке http://localhost:8080/aggregator/
4. Пользователи (они создаются когда прогоняется скрипт инициализации БД): demo/demo (USER), user/user (USER), admin/admin (ADMIN) (админ видит фиды всех обычных юзеров)

## Особенности
- Данный тестовый проект совмещает несколько тестовых заданий
- В изначальном задании на агрегатор новостей не было ничего сказано про UI, т.е. как пользователь вообще должен взаимодействовать с системой. Я сделал это наиболее привычным способом - Spring Boot MVC/thymeleaf
- Упор на UI не делался, там легко могут быть глюки, особенно связанные с JS

## Как работает:
- чтобы смотреть/фильтровать агрегированные новости, сначала надо настроить новостные сайты/rss
- для этого, после логина, зайти на вкладку Feeds, нажать "Add Feed" и ввести:
*Имя фида - любое
*Url - примеры:
```
http://static.feed.rbc.ru/rbc/logical/footer/news.rss
https://rss.newsru.com/russia/
```
*Правила парсинга - задаются в виде json. Можно оставить пустым, тогда будет использоваться дефолтовое правило для РСС, или же явно его указать
```
{ "itemXPath": "//item", "descriptionXPath": "description", "titleXPath": "title", "linkXPath": "link" }
```
Формат простой: 
- itemXPath - XPath выражение для элемента новости, например /rss/channel/item или //item
- titleXPath, linkXPath, descriptionXPath - задают путь к заголовку, описанию и линке, относительно новостного элемента. Тоже XPath
т.е. его не только для rss можно использовать, но и для xhtml страниц.


